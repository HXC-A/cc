<h1>Message</h1>

<div>
  <%= link_to "Create Message", new_message_path, class: "btn btn-primary" %>
</div>

<div>
  <%= link_to "Inbox", messages_path, class: "btn btn-secondary" %> 
  <%= link_to "Outbox", messages_path(type: 'outbox'), class: "btn btn-secondary" %> 
</div>

<div class="row">
  <div class="col-12">
    <table class="table">
      <tr>
        <th>ID</th>
        <th><%= params[:type] == 'inbox' ? "Sender" : "Recipient" %></th>
        <th>Content</th>
        <th>Read</th>
        <th></th>
      </tr>
      <% @messages.each do |message| %>
        <tr>
          <td><%= message.id %></td>
          <td><%= params[:type] == 'inbox' ? message.sender.username : message.receiver.username %></td>
          <td><%= truncate message.content, length: 30 %></td>
          <td><%= message.is_read_to_s %></td>
          <td>
            <%= link_to "more info", message_path(message) %>
          </td>
        </tr>
      <% end -%>
    </table>

    <%= will_paginate @messages %>
  </div>
</div>
